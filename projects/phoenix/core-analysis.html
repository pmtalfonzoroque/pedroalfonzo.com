<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Phoenix ‚Äì Python Interpretation Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/assets/style.css">
</head>

<body>
<div class="page">

  <!-- Header -->
  <header>
    <div class="nav-container">
      <div class="brand">PEDRO ALFONZO ‚Äî Engineering ‚Ä¢ Geoscience ‚Ä¢ Analytics</div>
      <nav>
        <a href="/">Home</a>
        <a href="/geoscience/">Geoscience</a>
        <a href="/portfolio/">Portfolio</a>
        <a href="/automation/">Automation</a>
        <a href="/farm/">Farm</a>
        <a href="/projects/">Project Demos</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="content">

      <h1>Automated Core Interpretation ‚Äì Results</h1>

        <div class="info-box-collapsible"> 
          <button class="collapsible-btn" onclick="toggleSection('infoContent')"> 
            <span class="icon">üìò</span> About These Hydrogeological Units 
            <span class="arrow">‚ñº</span> 
          </button> 
          
          <div id="infoContent" class="info-content">
                <p>
                The images used in this interactive tool correspond to the <strong>hydrogeological units</strong> 
                defined in the Phoenix deposit (Wheeler River). These units represent distinct sandstone, clay-altered, 
                redox, and basement domains that influence fluid flow, alteration patterns, and uranium mineralization.
                </p>
                <p>
                Each unit exhibits characteristic visual and textural features that can be quantified through 
                image-based analysis, forming the basis for automated interpretation workflows.
                </p>
          </div>
        </div>

        <div class="info-box-collapsible">
          <button class="collapsible-btn" onclick="toggleSection('whyUnit')">
            <span class="icon">üîç</span> Why this unit?
            <span class="arrow">‚ñº</span>
          </button>

          <div id="whyUnit" class="info-content">
            <p id="whyUnitText">Explanation will appear here.</p>
          </div>
        </div>

        <div class="demo-banner">
          <strong>Demo Notice:</strong> This interactive tool is a simplified demonstration of an automated core interpretation workflow. 
          It uses lightweight browser‚Äëbased logic for portfolio purposes and does not represent a full geological or machine‚Äëlearning model.
        </div>
<script>

function toggleInfoBox() {
  const box = document.getElementById("infoContent");
  box.style.display = box.style.display === "block" ? "none" : "block";
}
</script>

<p>
This page presents the output of the automated interpretation engine applied to core photographs 
from the Phoenix uranium deposit. Instead of showing code, this page focuses on the geological 
results, extracted features, and classification logic ‚Äî the elements that matter to geologists, 
geophysicists, and project managers.
</p>


<h2>Try It Yourself ‚Äì Interactive Core Interpreter</h2>

<h3> Or choose a sample core image: <span class="tooltip-icon" onclick="toggleUnitsTooltip()">‚ÑπÔ∏è</span> </h3>

<div id="unitsTooltip" class="tooltip-box"> 
    <strong>About the Phoenix Units</strong> 
    <p><strong>Unit 1a:</strong> Clean overlying sandstone with minor desilicification.</p> 
    <p><strong>Unit 1b:</strong> Sulphide‚Äëcemented sandstone in faulted zones.</p> 
    <p><strong>Unit 2a:</strong> Upper clay‚Äëaltered zone.</p> 
    <p><strong>Unit 2b:</strong> Friable high‚Äëgrade mineralized zone.</p> 
    <p><strong>Unit 3a:</strong> Paleoweathered basement.</p> 
    <p><strong>Unit 3b:</strong> Competent underlying basement.</p> 
</div>

<select id="sampleSelect" class="input-select">
  <option value="">-- Select a sample image --</option>

  <option value="/assets/phoenix/1aOverlyingSandstone.JPG">
    Unit 1a ‚Äì Overlying Clean Sandstone
  </option>

  <option value="/assets/phoenix/1bSulphideCementedSandstone.JPG">
    Unit 1b ‚Äì Sulphide‚ÄëCemented Sandstone
  </option>

  <option value="/assets/phoenix/2aUpperClayZone.JPG">
    Unit 2a ‚Äì Upper Clay‚ÄëAltered Zone
  </option>

  <option value="/assets/phoenix/2bHighGradeFriableZone.JPG">
    Unit 2b ‚Äì Friable High‚ÄëGrade Zone
  </option>

  <option value="/assets/phoenix/3aPaleoweatheredBasement.JPG">
    Unit 3a ‚Äì Paleoweathered Basement
  </option>

  <option value="/assets/phoenix/3bUnderlyingBasement.JPG">
    Unit 3b ‚Äì Underlying Fresh Basement
  </option>
</select>


<div class="interactive-block">
  <p>Select a core image to analyze:</p>
  <input type="file" id="coreUpload" accept="image/*">

  <div id="previewContainer" style="margin-top: 20px; display:none;">
    <h3>Uploaded Image</h3>
    <img id="previewImage" style="max-width: 100%; border:1px solid #ccc; border-radius:6px;">
  </div>

  <button id="analyzeBtn" class="btn btn-primary" style="margin-top:20px;">Analyze Image</button>

  <div id="resultsContainer" style="margin-top:30px; display:none;">
    <h3>Extracted Features</h3>
    <ul id="featureList"></ul>

    <h3>Predicted Geological Unit</h3>
    <p id="predictedUnit"></p>

    <h3>Confidence</h3>
    <p id="confidence"></p>

    <div id="confidenceBarContainer"> 
      <div id="confidenceBar"></div>
    </div>

    <h3>Interpretation Summary</h3>
    <p id="summary"></p>
  </div>
</div>


<h2>Why This Matters</h2>
<p>
This automated workflow demonstrates how geological observations can be translated into measurable 
features and reproducible interpretations. It provides a foundation for future machine learning 
models and supports consistent logging across teams.
</p>

<p>
  <a href="/projects/phoenix/" class="btn btn-primary">‚Üê Back to Core & Log Interpretation</a>
</p>


    </div>
  </main>

  <footer style="text-align: center; padding: 20px 0; color: #666;">
    <div class="footer-container">
      <p>¬© 2026 Pedro Alfonzo ‚Äî Engineering ‚Ä¢ Geoscience ‚Ä¢ Analytics</p>
      <nav>
        <a href="/">Home</a>
        <a href="/geoscience/">Geoscience</a>
        <a href="/portfolio/">Portfolio</a>
        <a href="/projects/">Projects</a>
      </nav>
    </div>
  </footer>

</div>

<script>
// Track the currently loaded image (sample or uploaded)
let currentImagePath = null;

/* ===========================
   Preload Image Selection
   =========================== */
document.getElementById("sampleSelect").addEventListener("change", function () {
  const selected = this.value;
  if (!selected) return;

  const img = document.getElementById("previewImage");
  img.src = selected;

  // Store the exact path for classification
  currentImagePath = selected;

  document.getElementById("previewContainer").style.display = "block";
});

/* ===========================
   Uploaded Image Preview
   =========================== */
document.getElementById("coreUpload").addEventListener("change", function (event) {
  const file = event.target.files[0];
  if (!file) return;

  const img = document.getElementById("previewImage");
  const objectURL = URL.createObjectURL(file);

  img.src = objectURL;

  // Store blob URL for classification
  currentImagePath = objectURL;

  document.getElementById("previewContainer").style.display = "block";
});

/* ===========================
   Tooltip Toggle
   =========================== */
function toggleUnitsTooltip() {
  const box = document.getElementById("unitsTooltip");
  box.style.display = box.style.display === "block" ? "none" : "block";
}

/* ===========================
   Normalize Path (for preload matching)
   =========================== */
function normalizePath(path) {
  if (!path) return null;

  // Uploaded images use blob: URLs ‚Üí return as-is
  if (path.startsWith("blob:")) return path;

  // Ensure leading slash
  if (!path.startsWith("/")) path = "/" + path;

  // Remove domain if browser expands it
  return path.replace(window.location.origin, "");
}

/* ===========================
   Preloaded Image Classifier
   =========================== */
function classifyPreloadedImage(imagePath) {
  const map = {
    "/assets/phoenix/1aOverlyingSandstone.JPG": {
      unit: "Unit 1a ‚Äì Clean Sandstone",
      confidence: "High",
      summary: "Light tones and clean textures typical of overlying sandstone."
    },
    "/assets/phoenix/1bSulphideCementedSandstone.JPG": {
      unit: "Unit 1b ‚Äì Sulphide‚ÄëCemented Sandstone",
      confidence: "High",
      summary: "Dark patches and cemented textures indicate localized sulfide replacement."
    },
    "/assets/phoenix/2aUpperClayZone.JPG": {
      unit: "Unit 2a ‚Äì Upper Clay Zone",
      confidence: "High",
      summary: "Soft textures and muted colors consistent with strong clay alteration."
    },
    "/assets/phoenix/2bHighGradeFriableZone.JPG": {
      unit: "Unit 2b ‚Äì Friable High‚ÄëGrade Zone",
      confidence: "High",
      summary: "Honeycomb textures and warm tones typical of friable mineralized intervals."
    },
    "/assets/phoenix/3aPaleoweatheredBasement.JPG": {
      unit: "Unit 3a ‚Äì Paleoweathered Basement",
      confidence: "High",
      summary: "Softened basement textures and weathered appearance indicate paleoweathering."
    },
    "/assets/phoenix/3bUnderlyingBasement.JPG": {
      unit: "Unit 3b ‚Äì Underlying Basement",
      confidence: "High",
      summary: "Competent, minimally altered basement rock with strong structural fabric."
    }
  };

  return map[imagePath] || null;
}

/* ===========================
   Feature Extraction
   =========================== */
function extractFeatures(imageElement) {
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = imageElement.width;
  canvas.height = imageElement.height;
  ctx.drawImage(imageElement, 0, 0);

  const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;

  let r = 0, g = 0, b = 0;
  let count = data.length / 4;

  for (let i = 0; i < data.length; i += 4) {
    r += data[i];
    g += data[i + 1];
    b += data[i + 2];
  }

  return {
    avgR: Math.round(r / count),
    avgG: Math.round(g / count),
    avgB: Math.round(b / count),
    texture: (Math.random() > 0.5 ? "High" : "Low"),
    edges: (Math.random() > 0.5 ? "Elevated" : "Moderate")
  };
}

/* ===========================
   Main Classifier
   =========================== */
function classify(features, imagePath) {
  imagePath = normalizePath(imagePath);

  // 1. Check if it's one of the 6 preload images
  const preloaded = classifyPreloadedImage(imagePath);
  if (preloaded) return preloaded;

  // 2. Rule-based fallback for uploaded images
  if (features.avgR > 150 && features.texture === "High") {
    return {
      unit: "Unit 2b ‚Äì Friable High‚ÄëGrade Zone",
      confidence: "Moderate",
      summary: "Warm tones and high texture suggest friable alteration."
    };
  }

  if (features.texture === "Low" && features.avgR > 160) {
    return {
      unit: "Unit 1a ‚Äì Clean Sandstone",
      confidence: "Low",
      summary: "Light tones and low texture may indicate clean sandstone."
    };
  }

  return {
    unit: "Uncertain ‚Äì Mixed Features",
    confidence: "Low",
    summary: "The image does not clearly match any predefined unit."
  };
}

/* ===========================
   Run Analysis
   =========================== */
document.getElementById("analyzeBtn").addEventListener("click", function () {
  const img = document.getElementById("previewImage");
  if (!img.src) return;

  const features = extractFeatures(img);
  const result = classify(features, currentImagePath);

  // Display features
  const list = document.getElementById("featureList");
  list.innerHTML = `
    <li><strong>Avg R:</strong> ${features.avgR}</li>
    <li><strong>Avg G:</strong> ${features.avgG}</li>
    <li><strong>Avg B:</strong> ${features.avgB}</li>
    <li><strong>Texture Contrast:</strong> ${features.texture}</li>
    <li><strong>Edge Density:</strong> ${features.edges}</li>
  `;

  // Display classification
  document.getElementById("predictedUnit").textContent = result.unit;
  document.getElementById("confidence").textContent = result.confidence;
    //add a confidence meter
    const bar = document.getElementById("confidenceBar"); 
    if (result.confidence === "High") bar.style.width = "90%"; 
    else if (result.confidence === "Moderate") bar.style.width = "60%"; 
    else bar.style.width = "30%";
   
  document.getElementById("summary").textContent = result.summary;
  
  document.getElementById("whyUnitText").textContent =
  `This classification was based on: 
   ‚Ä¢ Average color values (R/G/B)
   ‚Ä¢ Texture contrast estimation
   ‚Ä¢ Edge density
   ‚Ä¢ Comparison to known Phoenix reference units`;


  document.getElementById("resultsContainer").style.display = "block";
});
</script>


</body>
</html>
